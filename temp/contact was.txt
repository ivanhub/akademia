<?php

/* @var $this yii\web\View */
/* @var $form yii\bootstrap\ActiveForm */
/* @var $model \frontend\models\ContactForm */

use yii\helpers\Html;
use yii\bootstrap\ActiveForm;
use yii\captcha\Captcha;
use phpnt\yandexMap\YandexMaps;

$this->title = 'Наши контакты';
$this->params['breadcrumbs'][] = $this->title;
?>



<!--    <div class="" id="full-widthid">
<div class="container-fluid mainblock text-center contacts">
  <div class="text-center contacts">  <div class="row">
  <div class="col-md-3 col-sm-3 col-xs-6  col-big-6  box1  cl-effect-12">
  <img class="hvr-grow1" src="../images/new_car.png" width="180px">
  <p class="blocktitlec anim_one  hvr-bob1 ">Автомотошкола</p>
  </div>
  <div class="col-md-3 col-sm-3 col-xs-6  col-big-6  box2 cl-effect-12">
  <img class="hvr-grow1" src="../images/two.png" width="150px" style="margin-top: 0;">
  <p class="blocktitlec anim_two  hvr-bob1">Самоходная техника</p>
  </div>
  <div class="col-md-3 col-sm-3 col-xs-6  col-big-6 box3  cl-effect-12">
  <img class="hvr-grow1" src="../images/boat_t2.png" width="160px">
  <p class="blocktitlec anim_three hvr-bob1">Судовождение</p>
  </div>
  <div class="col-md-3 col-sm-3 col-xs-6  col-big-6 box4  cl-effect-12">
  <img class="hvr-grow1" src="../images/new_car.png" width="180px" style="margin-top: 0;">
  <p class="blocktitlec anim_four hvr-bob1">Защитное вождение</p>
  </div>
  </div> 
  </div>



 -->



<!-- <?= Html::encode($this->title) ?> --> <br/>    <br/>
<div class="site-contact container">
   
    <div class="row">
    <div class="col-md-6 col-sm-6">
 <h1>Контакты</h1>


<p><b> АНО ДПО "Академия".</b></p>
  <div class="START"></div>
<!-- <div class="panel-group" id="accordion">
  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a data-toggle="collapse" data-parent="#accordion" href="#collapse1">
       Центральный офис</a>
      </h4>
    </div>
    <div id="collapse1" class="panel-collapse collapse in">
      <div class="panel-body"><b> 443099, г. Самара, ул. Молодогвардейская 33, оф. 232. Время работы с 8:00-17:00. Тел.: (846) 205-77-66</b></div>
    </div>
  </div>
  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a data-toggle="collapse" data-parent="#accordion" href="#collapse2">
       Наш автодром</a>
      </h4>
    </div>
    <div id="collapse2" class="panel-collapse collapse">
      <div class="panel-body"><b>г. Самара, ул. Утевская, напротив 4 роты полка ДПС ГИБДД Управление МВД России по г. Самаре).Время работы 9:00-20:00 </b></div>
    </div>
  </div>

</div> -->
</p>
<p><b>Тел.:</b> (846) 255-69-99</p> 
<p><b>Электронная почта:</b> <a href="mailto:samarapb@mail.ru">samarapb@mail.ru</a></p>
<br/><br/>
    </div>
    <div class="col-md-6 col-sm-6">  
<div id="map"></div>


    </div> </div>
   
<!--
<div class="container-fluid">
 <h6 class="text-center">Схема проезда </h6>
 <br/>

<section class="map wideline"></section>
 <BR><BR><BR><BR>
Вторая карта
<div id="map2" class="wideline" ></div> -->

</div>

<!-- <section class="feedback">

    <p>
Любые интересующиеся вопросы, Вы можете задать через форму обратной связи, пожалуйста, заполните форму для связи с нами. 
    </p>

    <div class="row">

        <div class="col-md-offset-4 col-lg-offset-3 col-lg-5 col-md-5 col-sm-7 col-sm-offset-2">
            <?php $form = ActiveForm::begin(['id' => 'contact-form']); ?>

                <?= $form->field($model, 'name')->textInput(['autofocus' => false]) ?>

                <?= $form->field($model, 'email') ?>

                <?= $form->field($model, 'subject') ?>

                <?= $form->field($model, 'body')->textarea(['rows' => 6]) ?>

                <?= $form->field($model, 'verifyCode')->widget(Captcha::className(), [
  'template' => '<div class="row"><div class="col-lg-3">{image}</div><div class="col-lg-6">{input}</div></div>',
                ]) ?>

                <div class="form-group">
                    <?= Html::submitButton('Submit', ['class' => 'btn btn-primary', 'name' => 'contact-button']) ?>
                </div>

            <?php ActiveForm::end(); ?>
        </div>
    </div>
    </section> -->

</div>
 <script src="http://api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript"></script>
    <script src="http://yandex.st/jquery/2.2.3/jquery.min.js" type="text/javascript"></script>
 

 <script type="text/javascript">
       


window.onload = function() {

 

ymaps.ready(init);

function init() {
    var groups = [
        {
            name: "Росавтоакадемия, Центральный офис",
            descr: "443099, г. Самара, <br>ул. Молодогвардейская 33, оф. 232, <br>тел.: (846) 205-77-66",
            items: [
                {
                    center: [53.182762,50.093797],
                    name: "",
                    num: 1
                },                
            ]},

        {
            name: "Автодром - Росавтоакадемия",
            descr: "г. Самара, <br/>ул. Утевская, напротив 4 роты полка ДПС ГИБДД). <br>Время работы 9:00-20:00",
            items: [
                {
                    center: [53.132978, 50.107227],
                    name: "",
                    num:2
                },
                
            ]},
                
    ];


    // Создание экземпляра карты.
    var myMap = new ymaps.Map('map', {
            center: [53.182762,50.093797],
            zoom: 17
        }, {
            searchControlProvider: 'yandex#search'
        }),
counter=0,


   BalloonContentLayout = ymaps.templateLayoutFactory.createClass(
           '<div class="ballon"><img style="background: transparent;  border: none;border-radius: none;padding: 0px; margin-right: 3px;" src="http://samarapb.ru/img_contact/logo2.png" class="ll"/><p style="padding-left:63px;margin:7px 0px;">443099, г. Самара, <br>ул. Молодогвардейская 33, <br>оф. 232, тел.: (846) 205-77-66</p><img class="close" id="close" style="background: transparent;  border: none;border-radius: none;padding: 0px;" src="http://samarapb.ru/img_contact/close.png"/></div>', {

            // Переопределяем функцию build, чтобы при создании макета начинать
            // слушать событие click на кнопке-счетчике.
            build: function () {
                // Сначала вызываем метод build родительского класса.
                BalloonContentLayout.superclass.build.call(this);
                                $('#close').bind('click', this.onCounterClick);

              
            },
            clear: function () {
                // Выполняем действия в обратном порядке - сначала снимаем слушателя,
                // а потом вызываем метод clear родительского класса.
                $('#close').unbind('click', this.onCounterClick);
                BalloonContentLayout.superclass.clear.call(this);
            },
                    onCounterClick: function () {
                                            myMap.balloon.close();

                
                },
            

        
            // Аналогично переопределяем функцию clear, чтобы снять
            // прослушивание клика при удалении макета с карты.

        }),

 BalloonContentLayout2 = ymaps.templateLayoutFactory.createClass(
           '<div class="ballon"><img style="background: transparent;  border: none;border-radius: none;padding: 0px; margin-right: 3px;" src="http://samarapb.ru/img_contact/logo2.png" class="ll"/><p style="padding-left:63px;margin:7px 0px;">ул. Утевская, напротив 4 роты полка ДПС ГИБДД). Время работы 9:00-20:00</p><img class="close" id="close" style="background: transparent;  border: none;border-radius: none;padding: 0px;" src="http://samarapb.ru/img_contact/close.png"/></div>', {

            // Переопределяем функцию build, чтобы при создании макета начинать
            // слушать событие click на кнопке-счетчике.
            build: function () {
                // Сначала вызываем метод build родительского класса.
                BalloonContentLayout.superclass.build.call(this);
                                $('#close').bind('click', this.onCounterClick);

              
            },
            clear: function () {
                // Выполняем действия в обратном порядке - сначала снимаем слушателя,
                // а потом вызываем метод clear родительского класса.
                $('#close').unbind('click', this.onCounterClick);
                BalloonContentLayout.superclass.clear.call(this);
            },
                    onCounterClick: function () {
                                            myMap.balloon.close();

                
                },
            

        
            // Аналогично переопределяем функцию clear, чтобы снять
            // прослушивание клика при удалении макета с карты.

        }),


        // Контейнер для меню.
        menu = $('<div class="panel panel-default"></div>');

            createMenuGroup(groups[0]);

    function createMenuGroup (group) {
        // Пункт меню.
        // 
    var goodItem1 = $('<div class="panel panel-default"><div class="panel-heading">  <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse1">' + groups[0].name + '</a>  </h4></div><div id="collapse1" class="panel-collapse collapse in"> <div class="panel-body"><b>'+ groups[0].descr +'</b></div></div></div>'),
   goodItem2 = $('<div class="panel panel-default"><div class="panel-heading">  <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse1">' + groups[1].name + '</a>  </h4></div><div id="collapse1" class="panel-collapse collapse in"> <div class="panel-body"><b>'+ groups[1].descr +'</b></div></div></div>');
   

            collection = new ymaps.GeoObjectCollection(),
       

        // Добавляем коллекцию на карту.
        myMap.geoObjects.add(collection);

 placemark = new ymaps.Placemark([53.182762,50.093797], {  name: 'odin name' },

 {             
            balloonContentLayout: BalloonContentLayout,
            // Запретим замену обычного балуна на балун-панель.
            // Если не указывать эту опцию, на картах маленького размера откроется балун-панель.
            balloonPanelMaxMapArea: 0, iconLayout: 'default#image',
            // Своё изображение иконки метки.
            iconImageHref: 'http://samarapb.ru/img_contact/icon22.png',
                iconImageSize: [50, 50],
            // Смещение левого верхнего угла иконки относительно
            // её "ножки" (точки привязки).
            iconImageOffset: [-32, -50],
                  balloonContentSize: [290, 79],
                    balloonLayout: "default#imageWithContent",
                    balloonImageHref: 'http://samarapb.ru/img_contact/ballon222.png',
                    balloonImageOffset: [-75, -90],
                    balloonImageSize: [280, 89],
                    balloonShadow: false,
                    balloonAutoPan: false


            // Размеры метки.
        });

 placemark2 = new ymaps.Placemark( [53.132978, 50.107227], {  name: 'dva name' },

 {             
            balloonContentLayout: BalloonContentLayout2,
            // Запретим замену обычного балуна на балун-панель.
            // Если не указывать эту опцию, на картах маленького размера откроется балун-панель.
            balloonPanelMaxMapArea: 0, iconLayout: 'default#image',
            // Своё изображение иконки метки.
            iconImageHref: 'http://samarapb.ru/img_contact/icon22.png',
                iconImageSize: [50, 50],
            // Смещение левого верхнего угла иконки относительно
            // её "ножки" (точки привязки).
            iconImageOffset: [-32, -50],
                  balloonContentSize: [290, 79],
                    balloonLayout: "default#imageWithContent",
                    balloonImageHref: 'http://samarapb.ru/img_contact/ballon222.png',
                    balloonImageOffset: [-75, -90],
                    balloonImageSize: [280, 89],
                    balloonShadow: false,
                    balloonAutoPan: false


            // Размеры метки.
        });

        // Добавляем метку в коллекцию.
        collection.add(placemark);
        collection.add(placemark2);


        // Добавляем подменю.
              goodItem1
             .appendTo(menu)
            // При клике по пункту подменю открываем/закрываем баллун у метки.
             .find('a') 
            .bind('click', function () {
                if (!placemark.balloon.isOpen()) {
                                        myMap.setCenter([53.182762,50.093797], 14);

                    placemark.balloon.open();

                }

   
                return false;
            });

                          goodItem2
             .appendTo(menu)
            // При клике по пункту подменю открываем/закрываем баллун у метки.
             .find('a') 
            .bind('click', function () {
    
                    myMap.setCenter( [53.132978, 50.107227], 13);

                if (!placemark2.balloon.isOpen()) {
                    placemark2.balloon.open();
                } 

                return false;
            });
    }

   
    // Добавляем меню в тэг BODY.
    menu.appendTo($('.START'));


/*if (!$(this).hasClass("test")) {*/



myMap.events.add('click', function (e) {
        if (!myMap.balloon.isOpen()) {
            var coords = e.get('coords');
            myMap.balloon.open(coords, {
                contentHeader:'АНО ДПО "АКАДЕМИЯ"',
                contentBody:'<p>Запись на занятия по тел.:</p>' +
                    '<p>(846) 205-77-66' + [
                 
                    ].join(', ') + '</p>',
                contentFooter:'<sup>Будем рады видеть вас на наших курсах</sup>'
            });
        }
        else {
            myMap.balloon.close();
        }
    });


    // Выставляем масштаб карты чтобы были видны все группы.
    myMap.setBounds(myMap.geoObjects.getBounds());
}


};

    </script>

